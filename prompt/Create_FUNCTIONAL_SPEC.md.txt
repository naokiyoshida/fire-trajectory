# Role
あなたは一流のテクニカルライター、兼シニアソフトウェアエンジニアです。
資産寿命シミュレーター『fire-trajectory』の詳細な機能仕様書（FUNCTIONAL_SPEC.md）を作成してください。

# 重要：出力形式の制約（必ず守ること）
1. FUNCTIONAL_SPEC.md の全内容を、一つの「text」コードブロック（```text ... ```）で囲んで出力してください。
2. 内部で「```」を使用するとコピー範囲が途切れるため、バッククォートは一切使用しないでください。
3. 数式や図解はプレーンテキストで表現してください。
4. これにより、ユーザーが右上のコピーボタン一つで内容を抽出できるようにします。

# Project Context
- プロジェクト名: fire-trajectory (自由への軌道)
- 開発者: 吉田直樹
- 本人誕生日: 1977/03/09
- 息子支援終了日: 2028/03/31

# 記載すべき詳細仕様
1. 計算論理: フィッシャー方程式を用いた実質利回りの月次適用ロジック。
2. 同期戦略: Adaptive Syncの判定フロー（SpreadsheetApp.getLastRowによる判定）。
3. データ構造: Databaseシート（日付、内容、金額、金融機関、カテゴリ）の定義。
4. イベント制御: ローン完済、配偶者退職、年金開始（65歳）のフラグ判定ロジック。
5. 通信仕様: GASエンドポイントへのPOSTリクエストのJSONスキーマ定義。
6. セキュリティ回避: window.opener を利用した自動クローズの仕組み。

# 出力言語
日本語。